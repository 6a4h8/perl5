<?xml version="1.0"?><?xml-stylesheet type="text/xml" href="#stylesheet"?><!DOCTYPE doc SYSTEM "doc.dtd"><doc>

<data>

<div><h2>Tickets Listed in #123921: 5.20.3 blockers</h2>

The leak isn't in blead so there is no blead commit to cherry-pick. The voting here relates to the two patches by Tony C on the ticket. -- steveh
AFAICT, the second patch on its own is both necessary and sufficient to fix the leak; valgrind reports an invalid free when both patches are applied. -- arc
<commit votes="steveh,tonyc,arc" id="" ticket="123786" desc="'use utf8;' leaks memory"/>

<commit votes="steveh,tonyc,arc" id="c0388966161bb22622ebac402bb1ebe081ad0b39" ticket="123976" desc="[Win32] Unable to build 64-bit blead using gcc-4.8.2"/>

I believe DaveM has expressed a vote for these, in https://rt.perl.org/Public/Bug/Display.html?id=124109#txn-1338401 -- arc
<commit votes="arc" id="3553f4fa11fd9e8bb0797ace43605cc33ebf32fa" ticket="124109" desc="panic: swash_fetch got swatch of unexpected bit width"/>
<commit votes="arc" id="4e0341d2ce817c9956f7f78e36bcaf8b764e18fc" ticket="124109" desc="panic: swash_fetch got swatch of unexpected bit width"/>

<commit votes="tonyc, arc" id="816b056ffb99ae54642320e20dc30a59fd1effef" ticket="123784" desc="Tests fail with GCC 5.0 because Errno cannot obtain errno constants"/>
<commit votes="tonyc, arc" id="3bea78d24634e630b610f59957e7a019205a67b2" ticket="123784" desc="Tests fail with GCC 5.0 because Errno cannot obtain errno constants"/>
<commit votes="tonyc, arc" id="33593911f214382b592d05aa902655301915e666" ticket="123784" desc="Tests fail with GCC 5.0 because Errno cannot obtain errno constants"/>

<commit votes="steveh,tonyc,arc" id="41ef2c66e0da6dfb04ded81b979f7081007a1add" ticket="124127" desc="Restore ability to debug threaded scripts"/>
<commit votes="steveh,tonyc,arc" id="f80262130b14af7d62281372d55e93f84e2a16b7" ticket="124127" desc="James McCoy is now a perl AUTHOR"/>
<commit votes="steveh,tonyc,arc" id="67a38f64602c1e8bbf6b6e5d21455c3f5df90f01" ticket="124127" desc="bump perl5db.pl's $VERSION"/>
<commit votes="steveh,tonyc,arc" id="902d16915db2735c3a41f15ef8d95cf300c31801" ticket="124127" desc="Restore ability to debug threaded scripts"/>

</div>

<div><h2>Other Proposed Cherry-Picks</h2>

Blead changes have been examined up to and including 64821df16a716bfc005acb06c7dc5b72afabe38d ([perl #123961] handle a missing closing ` for -DT output)

Proposed cherry-picks are grouped according to the types of change permitted by perlpolicy.pod.

(NOTE: The same document states that the following types of change are not acceptable:

Anything controversial
Breaking binary compatibility
Adding or removing features
Adding new warnings, errors or deprecations

The same criteria apply to code in dual-life modules as to core code.)

</div>

<div><h3>Security Fixes</h3>

</div>

<div><h3>Crash / Assertion / Memory Corruption Fixes</h3>

I feel a bit leery about this next one.  The code is a bit fragile, so I would feel more comfortable with a couple monthsâ€™ blead smoking. But the blead implementation changed shortly after that commit. --sprout
<commit votes="steveh" id="db5cc3ee5bdb14c8d59302b6c3ef8ff4bca660bb" ticket="" desc="Fix crash in leave_scope when my sub has CvGV"/>

<commit votes="steveh, arc" id="83a85f49e265a458a481a9dc402dd3bdd30ae457" ticket="123711" desc="[perl #123711] Fix crash with 0-5x-l{0}"/>

Both of the following should be applied, or neither -- tonyc.
<commit votes="steveh,tonyc,arc" id="5fe499a8e26270679c0c6d48431f3a328a8ffeba" ticket="123218" desc="[perl #123218] 'preserve' $/ if set to a bad value"/>
<commit votes="steveh,tonyc,arc" id="ddce084af02764d4f30ef6089ae67a7983fcc690" ticket="123739" desc="Remove get-magic from $/"/>

The second of the following 2 depends on the first being applied -- tonyc.
<commit votes="steveh,tonyc,arc" id="8d28fc8f69270cc75d9564b369ac6008c5b5d617" ticket="123748" desc="[perl #123748] - Add test case for possible getenv/putenv/setenv stomping in perl.c"/>
<commit votes="steveh,tonyc,arc" id="7f8f1c2613d1d5df0b1071bd5fe3eec808c4a69e" ticket="123748" desc="Fix quoting in new switchd.t test."/>

<commit votes="steveh,tonyc,arc" id="175c4cf98f8ca99cd4f626369ef0beb1d69f8ce5" ticket="123748" desc="locale.c: savepv() of getenv()"/>
<commit votes="steveh,tonyc,arc" id="9e0b0d62ba5a660ab4b6f498912cfaead79014a0" ticket="123748" desc="perl.c: Don't read possibly zapped memory"/>

If a reasonable way is found to make the new test in d27f4 pass in maint, I'll be +1 on these. But I'm not convinced that it's worth making this change to maint to fix a compile-time-only bug if we know that it doesn't fix all the cases. -- arc.
<commit votes="steveh" id="e47d32dcd59a578274f445fac79e977d83055c8c" ticket="123712" desc="[perl #123712] Fix /$a[/ parsing"/>
This commit (d27f4)'s new test is failing in a dry-run of cherry-picking into maint -- steveh:
<commit votes="steveh" id="d27f4b916ce5819f564bdd4a135137c457156333" ticket="123712" desc="[perl #123712] Don't check sub_inwhat"/>

<commit votes="steveh, arc" id="1956db7ee60460e5b4a25c19fda4999666c8cbd1" ticket="124156" desc="RT #124156: death during unwinding causes crash"/>
<commit votes="steveh, arc" id="46b27d2f2c37f40dde845f9b4743975c69f2cc27" ticket="123398" desc="don't fatalize warnings during unwinding (#123398)"/>

</div>

<div><h3>AFL Crash / Assertion / Memory Corruption Fixes</h3>

This fix has a problem with it that needs to be solved before we can backport it.  See http://www.nntp.perl.org/group/perl.perl5.porters/;msgid=20150120104834.32035.qmail@lists-nntp.develooper.com
<commit votes="sprout, steveh, hv" id="fa8f4f85ec35b0f047603e5b90a788571f7141bd" ticket="123554" desc="[perl #123554] avoid a crash from SvGROW(MEM_SIZE_MAX)"/>
<commit votes="steveh, hv" id="cc31571878894dd5f5af83722ca0c2a24621300c" ticket="123554" desc="[perl #123554] stop checking the message"/>

Does this need d9a13252ba5aad7b3eaaff069b56472cfb651a40 too? -- steveh
<commit votes="steveh" id="67c71cbbd62a75ff2b913421806f6ea0f0b33558" ticket="" desc="Fix double free with const overload after errors"/>

<commit votes="" id="eabab8bccf871f8e85dfa4a3825827825fb86cd9" ticket="123617" desc="Localise PL_lex_stuff (crash fix)"/>
<commit votes="" id="ce7c414ee71d82955c799dca38981337cdf77b42" ticket="123955" desc="[perl #123955] Fix assert fail with 0 s/// in quotes"/>

<commit votes="" id="488bc5795891132d29daec7a860cab2a6266230c" ticket="123737" desc="[perl #123737] Fix assertion failure with 0${"/>
<commit votes="" id="310a0d0a370ea21c004bfea4bbdd2cf15da94547" ticket="123737" desc="[perl #123737] Fix assertion failure with 0$#{"/>

<commit votes="" id="3c47da3c2ebf51f08bb927dfa456939cc6c8c30f" ticket="123753" desc="[perl #123753] &amp;\0foo parsing"/>
<commit votes="" id="eea89386b3fb948a8b1eb5ea860ec0a970c9e559" ticket="123753" desc="[perl #123753] Assert fail with &amp;{+foo} and errors"/>

<commit votes="" id="7aa8cb0dec173dcfca4157e60634c74b97429a05" ticket="123677" desc="[perl #123677] Crash with token stack overflow"/>
<commit votes="" id="a53bfdae91fb2d719e69761f2d2f84c5d8a47753" ticket="123759" desc="[perl #123759] always count on OPpTRANS_IDENTICAL"/>

<commit votes="" id="8a6d8ec6fe627c401c6c759edd38bbb10e4b56e9" ticket="123755" desc="[perl #123755] including unknown char in error requires care"/>
<commit votes="" id="7082c44063b6e00b0bad96f3d8adec0946f1938c" ticket="123755" desc="regcomp can read past end of string after parsing flags"/>

<commit votes="" id="9efda33a86bb90e4838144d230a4fc3ae4d63d7d" ticket="123554" desc="[perl #123554] catch a couple of other size overflows"/>
<commit votes="" id="296f0d566b9f3ad1885ae7493caaffbd0cf2eada" ticket="123554" desc="[perl #123554] fix threaded builds and prevent a warning"/>

<commit votes="" id="87ebf1e3df9537a204b21f0405c6e60f2acdcc47" ticket="123816" desc="[perl #123816] fix stat stacking"/>
<commit votes="" id="d0bec20370cb0ec3e757fde65d8f1d13693e913f" ticket="123870" desc="[perl #123870] fixup trie runtime debug output"/>
<commit votes="" id="fc1bb3f2dcaaac9f305b27acb4800babdc8a06f3" ticket="123874" desc="[perl #123874] fix argument underflow for pack()"/>

<commit votes="" id="f4460c6f7a0de152ddaed69a0ba0efe653258f81" ticket="123801" desc="[perl #123801] Stop s##[}#e from crashing"/>
<commit votes="" id="479ae48e22f1160cf86508685822bf7e53e5816b" ticket="123802" desc="[perl #123802] Assertion failure with /$0{}/"/>
<commit votes="" id="66edcf79f81d47833f2be442966a5e90a223365f" ticket="123802" desc="[perl #123802] Assertion failure with qq[\L\L]"/>

<commit votes="" id="55b3980349c58171a77894903fd928262fb081f2" ticket="123763" desc="[perl #123763] Clear target on my $_; split"/>

<commit votes="" id="6b2b48acae2d74dcbde18f956f6951b5b9aa468b" ticket="123817" desc="[perl #123817] Assert fail with attr in anon hash"/>
<commit votes="" id="813d2eb17164751c312a69e7c7c56dc71aad1ff1" ticket="123849" desc="[perl #123849] sv.c: Fix sv_clear -Do output"/>
<commit votes="" id="923ed5809c063091fb0f77dc6f1b8231d587d13e" ticket="123960" desc="[perl #123960] sv.c: Fix gp_free -Do output"/>
<commit votes="" id="9d58dbc453a86c9cbb3a131adcd1559fe0445a08" ticket="123963" desc="[perl #123963] qq[@&lt;fullwidth digit&gt;]"/>
<commit votes="" id="3d50185de85a756293c9c3954114bd5c2d08a460" ticket="123847" desc="[perl #123847] crash with *foo::=*bar::=*with_hash"/>
<commit votes="" id="b24768f02e4adcd11668f94274f5617c4a3f5379" ticket="123995" desc="[perl #123995] Assert fail with s;@{&lt;&lt;;"/>
<commit votes="" id="aab1202a8d4b691b16384fb41d2e2a06abf664e2" ticket="123790" desc="[perl #123790] Assert fail with *x=&lt;y&gt;"/>
<commit votes="" id="d655d9a2c4d4884d0edf5364a3aafbc8b0b8de38" ticket="124099" desc="[perl #124099] Wrong CvOUTSIDE in find_lexical_cv"/>
<commit votes="" id="b12396ac84cef7e23e1aac516fa676165ddfc790" ticket="124187" desc="[perl #124187] don't call pad_findlex() on a NULL CV"/>
<commit votes="" id="de0885da327045eed274d7f8913a58e6de0e0f30" ticket="124385" desc="null ptr deref in Perl_cv_forget_slab"/>

</div>

<div><h3>Regression Fixes</h3>

<commit votes="tonyc, arc" id="bae8cfc6926f9b04d8adac6a9ee6d563cc18263f" ticket="125121" desc="Don't treat setpgrp($nonzero) as setpgrp(1)"/>
<commit votes="steveh, arc" id="0fa70a06a98fc8fa9840d4dbaa31fc2d3b28b99b" ticket="123743" desc="simpify and speed up /.*.../ handling"/>
<commit votes="steveh,tonyc,arc" id="ed38223246c041b4e9ce5687cadf6f6b903050ca" ticket="123202" desc="[perl #123202] speed up scalar //g against tainted strings"/>
<commit votes="steveh,tonyc,arc" id="71622e40793536aa4f2ace7ffc704cc78151fd26" ticket="" desc="Stop $^H |= 0x1c020000 from enabling all features"/>

<commit votes="steveh,tonyc,arc" id="b3089e964c0afaf7eb8d54aa5a912e4eb2e6c176" ticket="124113" desc="[perl #124113] Make check for multi-dimensional arrays be UTF8-aware"/>
<commit votes="steveh,tonyc,arc" id="6e59c8626d31f697a2b7b36cf8a200b36d93eac2" ticket="124113" desc="Allow unquoted UTF-8 HERE-document terminators"/>
<commit votes="steveh,tonyc,arc" id="8ce2ba821761a7ada1e1def512c0374977759cf7" ticket="124113" desc="Fix '...without parentheses is ambuguous' warning for UTF-8 function names"/>

</div>

<div><h3>Build and Installation Fixes</h3>

The following allows the other hv_func.h patch below to apply cleanly and fixes a real bug. I've voted for the second, but the conflict resolution for that will effectively apply the first, so not applying for now.
<commit votes="tonyc, arc" id="54e07e2b21cb1f58c04d67bca2a311715ba8815e" ticket="" desc="hv_func.h - fix seed initialization in sdbm and djb2 hashing algorithms."/>
<commit votes="steveh, khw, tonyc" id="b404539126a567987b4748a67c06be2d23b471d5" ticket="123483" desc="silence VC Win64 perl warnings in hv_func.h"/>

On the mailing list (http://www.nntp.perl.org/group/perl.perl5.porters/2015/05/msg227963.html et seqq) Tony says that f33b2f5 is incorrect, because it edits a generated file rather than that file's source. However, blead doesn't seem to have been changed to delete mkstemp() from win32 builds, as seemed to be the consensus. I'm therefore assuming that the degree of wrongness isn't sufficient to block this fix from a maint release (and it does clearly provide a platform-specific build fix). -- arc.
<commit votes="steveh, arc" id="f33b2f585292653a3c50ea39cbdab734c3473fcb" ticket="" desc="handle existing mkstemp() in mingw-w64-v4"/>
<commit votes="steveh, arc" id="6378109479f5b474e8205c8478f484b209078772" ticket="" desc="add new address for kmx"/>

</div>

<div><h3>Portability Fixes</h3>

<commit votes="tux, khw, arc" id="237050634b19905cdd9e8e25c2a43d0b24eb59f2" ticket="" desc="Add pthread to libswanted"/>
<commit votes="tux, khw, arc" id="90207ba1bd77fb10e2c39594d954b43a9e8ee948" ticket="" desc="Put pthread in front of libswanted and add cl"/>

<commit votes="tonyc, arc" id="0cf583b0808e2fb2ac90751d506f2b8ff75aed86" ticket="" desc="uname -r works on MINIX as well"/>

</div>

<div><h3>Platform-Specific Test Fixes</h3>

</div>

<div><h3>Documentation Fixes</h3>

<commit votes="steveh,tonyc,arc" id="730d89736d0ae5dfc7580108c451efe91b5102fc" ticket="" desc="Fix warning message regarding 'use autodie' and 'use open'."/>
<commit votes="steveh,tonyc,arc" id="2a403855670ae8592c5a3ca4396e6e909a4fc593" ticket="" desc="perlunicook: Note that autodie &gt;= 2.26 should be okay with 'use open'."/>

<commit votes="steveh,tonyc,arc" id="7ad03f5069e771fe44e92b694a23f10354c548d1" ticket="" desc="Fix setenv() replacement documentation in perlclib"/>
<commit votes="steveh,tonyc,arc" id="38f18a308b948c6eaf187519a16d060e1ec7cc20" ticket="" desc="perlhacktips: Add caution about clib ptr returns to static memory"/>

<commit votes="steveh,tonyc,arc" id="7b237c8f3da9b9cd57a5cbd035ff4d3e70dcbb7b" ticket="" desc="Fix minor code typos in perlunicook"/>
<commit votes="steveh,tonyc,arc" id="616b344493d526c505a241bee3571ae735408885" ticket="" desc="Randy Stauneris now a perl author"/>

<commit votes="steveh,tonyc,arc" id="f942a0dfa923e36f91c00b44e21563cd50dc750b" ticket="122322" desc="[perl #122322] Update OOK example in perlguts"/>
<commit votes="steveh,tonyc,arc" id="d8c1af4e0d4774b60bd59dc0039c7e101f292a4a" ticket="" desc="perlfunc: mention that study() is currently a noop"/>
<commit votes="steveh" id="965d3000a316a5ed367c2ce65d040e1125d5e31d" ticket="" desc="Update supported versions in perlpolicy.pod"/>

</div>

</data>

<xsl:stylesheet version="1.0" id="stylesheet" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"><xsl:template match="xsl:stylesheet"/>
  <xsl:template match="/">
    <html>
      <head>
        <title>Cherry-pick votes for maint-5.20</title>
        <style>
          .accepted .ref a { color: #090 }
          .unvoted  .ref a { color: #c00 }
        </style>
      </head>
      <body>
        <h1>Cherry-pick votes for maint-5.20</h1>
        <xsl:for-each select="/doc/data/div">
          <h2><xsl:value-of select="h2"/></h2>
          <h3><xsl:value-of select="h3"/></h3>
          <table>
            <xsl:for-each select="commit|head">
              <xsl:choose>
                <xsl:when test="local-name() = 'commit'">
                  <tr>
                    <xsl:apply-templates select="@votes"/>
                    <td style="vertical-align: top; white-space: nowrap">
                      <xsl:value-of select="@votes"/>
                    </td>
                    <td class="ref" style="vertical-align: top">
                      <a href="http://perl5.git.perl.org/perl.git/commitdiff/{@id}">
                        <xsl:value-of select="@id"/>
                      </a>
                    </td>
                    <td style="vertical-align: top">
                      <a href="https://rt.perl.org/Ticket/Display.html?id={@ticket}">
                        <xsl:value-of select="@ticket"/>
                      </a>
                    </td>
                    <td style="vertical-align: top">
                      <xsl:value-of select="@desc"/>
                    </td>
                  </tr>
                </xsl:when>
                <xsl:when test="local-name() = 'head'">
                  <tr>
                    <xsl:apply-templates select="@votes"/>
                    <td style="vertical-align: top; white-space: nowrap">
                      <xsl:value-of select="@votes"/>
                    </td>
                    <td class="ref" style="vertical-align: top">
                      <a href="http://perl5.git.perl.org/perl.git/shortlog/refs/heads/{@branch}">
                        <xsl:value-of select="@branch"/>
                      </a>
                    </td>
                    <td style="vertical-align: top">
                      <a href="https://rt.perl.org/Ticket/Display.html?id={@ticket}">
                        <xsl:value-of select="@ticket"/>
                      </a>
                    </td>
                    <td style="vertical-align: top">
                      <xsl:value-of select="@desc"/>
                    </td>
                  </tr>
                </xsl:when>
              </xsl:choose>
            </xsl:for-each>
          </table>
        </xsl:for-each>
      </body>
    </html>
  </xsl:template>
  <xsl:template match="@votes">
    <xsl:choose>
      <xsl:when test=". = ''">
        <xsl:attribute name="class">unvoted</xsl:attribute>
      </xsl:when>
      <xsl:when test="substring-after(substring-after(normalize-space(translate(., ',', ' ')), ' '), ' ') != ''">
        <xsl:attribute name="class">accepted</xsl:attribute>
      </xsl:when>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet>

</doc>
